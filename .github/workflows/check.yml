name: Plagiarism search

on:
  push:

  workflow_dispatch:

jobs:
  plag-search:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v2

      - name: Pull docker image
        run: docker pull artanias/code-plagiarism-ubuntu18.04:latest

      - name: Run plagiarism searching
        run: docker run --rm --volume $(pwd):/usr/src/works:ro "artanias/code-plagiarism-ubuntu18.04:latest" /bin/bash -c "codeplag --extension py --directories /usr/src/works/"